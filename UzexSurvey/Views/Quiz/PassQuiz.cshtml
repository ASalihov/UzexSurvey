@using DAL.Entities
@model DAL.ViewModels.QuizViewModel

@{
    ViewBag.Title = "PassQuiz";
}

<h2>@Model.Name</h2>

@using (@Html.BeginForm())
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(model => model.Id)
    @Html.HiddenFor(model => model.Name)
    @Html.DisplayFor(model => model.Description)
    @Html.HiddenFor(model => model.Description)
    
<div class="list-group">
    @for (int i = 0; i < Model.Questions.Count; i++)
    {
        <div class="list-group-question">
            <h4>@Html.DisplayFor(model => model.Questions[i].Text)</h4>
            @Html.HiddenFor(model => model.Questions[i].Id)

            @if (Model.Questions[i].Type == DAL.Entities.QuestionType.radio)
            {
                <ul class="simple-list">
                    @for (int j = 0; j < Model.Questions[i].Options.Count(); j++)
                    {
                        var option = Model.Questions[i].Options[j];
                        
                        <li>
                            @Html.RadioButtonFor(model => model.Questions[i].SelectedOption, option.Id, new { id = option.Id })
                            @if (option.OptionType == OptionType.textbox)
                            {
                                @Html.TextBoxFor(model => model.Questions[i].Options[j].TextAnswer)
                            }
                            else if (option.OptionType == OptionType.textarea)
                            {
                                @Html.TextAreaFor(model => model.Questions[i].Options[j].TextAnswer)
                            }
                            else
                            {
                                @Html.DisplayFor(model => option.Name)
                            }

                            @Html.HiddenFor(m => m.Questions[i].Options[j].TextAnswer)
                        </li>
                    }
                </ul>
            }
            else if (Model.Questions[i].Type == DAL.Entities.QuestionType.ckeckbox)
            {
                <ul class="simple-list">
                    @for (int j = 0; j < Model.Questions[i].Options.Count(); j++)
                    {
                        <li>
                            @Html.CheckBoxFor(model => model.Questions[i].Options[j].Selected, Model.Questions[i].Options[j].Name)
                            @Html.DisplayFor(model => model.Questions[i].Options[j].Name)
                        </li>
                    }
                </ul>
            }
            else
            {
                @Html.TextAreaFor(model => model.Questions[i].TextAnswer)
            }

        </div>
    }

    <div class="form-group">
        <input type="submit" value="Save" class="btn btn-success navbar-left" />
        <p class="clearfix"></p>
    </div>

</div>
}